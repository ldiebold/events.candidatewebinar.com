(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{2721:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{attrs:{padding:""}},[e.onlineEvent?i("div",{staticClass:"column items-center"},[!1===e.session_has_started&&!1===e.session_has_ended?i("q-banner",{staticClass:"bg-blue text-white full-width q-mb-lg"},[e._v("\n      Session will start "+e._s(e.timeUntilStartHumanized)+"\n    ")]):e._e(),!0===e.session_has_ended?i("q-banner",{staticClass:"bg-grey-8 text-white full-width q-mb-lg"},[e._v("\n      Session has Ended\n    ")]):e._e(),!0!==e.session_has_ended?i("div",{staticClass:"text-h2 text-grey-8"},[e._v(e._s(e.onlineEvent.title))]):e._e(),!0!==e.session_has_ended?i("div",{staticClass:"text-h5 text-grey-6 q-mb-sm"},[e._v(e._s(e.onlineEvent.description))]):e._e(),i("div",{staticClass:"full-width",staticStyle:{"max-width":"60%"}},[i("VimeoVideo",{ref:"video",attrs:{"video-id":e.videoId},on:{ready:e.handleVideoReady}})],1)],1):e._e(),e._v("\n\n  "+e._s(e.currentVideoTime)+"\n")])},n=[],a=(i("534d"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("VimeoPlayer",{ref:"video",staticClass:"embed-container",attrs:{"video-id":e.videoId},on:{loaded:e.onLoaded}})}),d=[],r=i("d38b"),o={props:{videoId:{required:!0,type:String}},components:{VimeoPlayer:r["a"]},computed:{},methods:{exec(e,...t){return this.video[e](...t)},onLoaded(){this.$emit("ready",this.$refs.video.player)}},data(){return{video:null}}},l=o,h=(i("bd49"),i("a6c2")),u=Object(h["a"])(l,a,d,!1,null,null,null),v=u.exports,m=i("8d35"),c=i.n(m),_=i("3cf6"),S=i.n(_),g=(i("b05d"),i("7014"));c.a.extend(g);var y={name:"EventPage",components:{VimeoVideo:v},props:{onlineEventCandidate:{required:!1}},data(){return{player:null,live_leeway:10,currentVideoTime:0,video_visible:!1,session_has_started:null,session_has_ended:null,timeUntilStartHumanized:null}},mounted(){const e=this;setInterval((()=>{e.handleSessionLive(),e.handleSessionIsOver(),e.timeUntilStartHumanized=this.$dayjs().to(this.onlineEvent.start_time)}),500)},methods:{logger(...e){console.log(...e)},updateCurrentVideoTime(){this.player.getCurrentTime().then((e=>{this.currentVideoTime=e}))},handleVideoReady(e){this.player=e,this.player.play();const t=this;t.setVideoInitialPlayTime(),setInterval((()=>{t.updateCurrentVideoTime(),t.handleVideoOutOfPlayTime(),t.playVideoIfPaused()}),500)},getSessionIsOver(){return-1===Math.sign(c()(this.onlineEvent.end_time).diff(new Date,"seconds"))},handleSessionIsOver(){this.session_has_ended=this.getSessionIsOver()},handleSessionLive(){this.session_has_started=this.getSessionIsLive()},getSessionIsLive(){return this.getSessionHasStarted()&&1===Math.sign(c()(this.onlineEvent.end_time).diff(new Date,"seconds"))},getSessionHasStarted(){return this.getTimeSinceStart()>0},getMinutesUntilLive(){return c()().diff(this.onlineEvent.start_time,"seconds")},getSessionHasNotStarted(){return!this.getSessionHasStarted()},setVideoInitialPlayTime(){this.getSessionIsLive()&&this.player.setCurrentTime(this.getTimeSinceStart())},handleVideoOutOfPlayTime(){this.getSessionHasNotStarted()||this.getSessionIsOver()||this.getVideoIsOutOfLeeway()&&this.player.setCurrentTime(this.getTimeSinceStart())},playVideoIfPaused(){this.player.play()},getTimeSinceStart(){const e=c()(new Date).diff(this.onlineEvent.start_time,"second");return e},getStartTimeMinusLeeway(){return this.getTimeSinceStart()-this.live_leeway},getStartTimePlusLeeway(){return this.getTimeSinceStart()+this.live_leeway},getVideoIsOutOfLeeway(){const e=this.currentVideoTime>this.getStartTimePlusLeeway(),t=this.currentVideoTime<this.getStartTimeMinusLeeway();return e||t}},computed:{onlineEvent(){return this.onlineEventCandidate?this.onlineEventCandidate:this.$MOnlineEvent.find(this.$route.params.online_event_id)},videoId(){return this.onlineEvent.video_url?S.a.parse(this.onlineEvent.video_url).id:null}}},p=y,f=i("505d"),w=i("91e4"),T=i("63c1"),V=i.n(T),b=Object(h["a"])(p,s,n,!1,null,null,null);t["default"]=b.exports;V()(b,"components",{QPage:f["a"],QBanner:w["a"]})},b9d6:function(e,t,i){},bd49:function(e,t,i){"use strict";i("b9d6")}}]);